<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Evaluation Report - NextHire.AI</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    
    <!-- Print-friendly styles -->
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .report-container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .report-header {
            text-align: center;
            border-bottom: 3px solid #007bff;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        
        .report-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
        
        .section-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 15px;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        
        .score-badge {
            display: inline-block;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .badge-ready {
            background-color: #28a745;
            color: white;
        }
        
        .badge-partial {
            background-color: #ffc107;
            color: black;
        }
        
        .badge-not-ready {
            background-color: #dc3545;
            color: white;
        }
        
        .chart-image {
            max-width: 100%;
            height: auto;
            margin: 20px 0;
            border: 1px solid #dee2e6;
            border-radius: 8px;
        }
        
        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .info-label {
            font-weight: bold;
            color: #495057;
        }
        
        .info-value {
            color: #212529;
        }
        
        .skills-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .skills-list li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
        }
        
        .skills-list li:before {
            content: "â€¢";
            position: absolute;
            left: 0;
            color: #007bff;
            font-weight: bold;
        }
        
        .no-print {
            text-align: center;
            margin-top: 30px;
        }
        
        @media print {
            body {
                background-color: white;
                padding: 0;
            }
            
            .report-container {
                box-shadow: none;
                padding: 20px;
            }
            
            .no-print {
                display: none;
            }
            
            .chart-image {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>

<div class="report-container">
    <!-- Report Header -->
    <div class="report-header">
        <h1>Resume Evaluation Report</h1>
        <p class="text-muted">NextHire.AI - Placement Readiness Analysis</p>
    </div>
    
    <!-- Resume Details Section -->
    {% if resume_data %}
    <div class="report-section">
        <div class="section-title">
            <i class="bi bi-person-circle"></i> Resume Details
        </div>
        
        <div class="info-row">
            <span class="info-label">Name:</span>
            <span class="info-value">{{ resume_data.name }}</span>
        </div>
        
        <div class="info-row">
            <span class="info-label">Email:</span>
            <span class="info-value">{{ resume_data.email }}</span>
        </div>
        
        <div class="info-row">
            <span class="info-label">Phone:</span>
            <span class="info-value">{{ resume_data.phone }}</span>
        </div>
        
        <div class="info-row">
            <span class="info-label">Degree:</span>
            <span class="info-value">{{ resume_data.degree }}</span>
        </div>
        
        <div class="info-row">
            <span class="info-label">CGPA:</span>
            <span class="info-value">{{ resume_data.cgpa }}</span>
        </div>
        
        {% if resume_data.city %}
        <div class="info-row">
            <span class="info-label">City:</span>
            <span class="info-value">{{ resume_data.city }}</span>
        </div>
        {% endif %}
        
        {% if resume_data.github_username %}
        <div class="info-row">
            <span class="info-label">GitHub:</span>
            <span class="info-value">{{ resume_data.github_username }}</span>
        </div>
        {% endif %}
        
        <div class="info-row">
            <span class="info-label">Skills:</span>
            <span class="info-value">{{ resume_data.skills }}</span>
        </div>
    </div>
    {% endif %}
    
    <!-- Resume Score Section -->
    <div class="report-section">
        <div class="section-title">
            <i class="bi bi-graph-up"></i> Resume Evaluation Score
        </div>
        
        <div class="text-center">
            <div class="score-badge 
                {% if readiness_status == 'Ready' %}badge-ready
                {% elif readiness_status == 'Partially Ready' %}badge-partial
                {% else %}badge-not-ready{% endif %}">
                {{ resume_score }} / 100
            </div>
            
            <p class="mt-3">
                <strong>Readiness Status:</strong> 
                <span class="
                    {% if readiness_status == 'Ready' %}text-success
                    {% elif readiness_status == 'Partially Ready' %}text-warning
                    {% else %}text-danger{% endif %}">
                    {{ readiness_status }}
                </span>
            </p>
        </div>
    </div>
    
    <!-- Missing Skills Section -->
    <div class="report-section">
        <div class="section-title">
            <i class="bi bi-exclamation-triangle"></i> Skill Gap Analysis
        </div>
        
        {% if missing_skills and missing_skills|length > 0 %}
        <p><strong>Skills to Improve:</strong></p>
        <ul class="skills-list">
            {% for skill in missing_skills %}
            <li>{{ skill }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <p class="text-success">
            <i class="bi bi-check-circle"></i> 
            <strong>No missing skills detected. You are fully eligible for this role.</strong>
        </p>
        {% endif %}
    </div>
    
    <!-- Job-Specific Evaluation Section -->
    {% if job_title != "Not Selected" %}
    <div class="report-section">
        <div class="section-title">
            <i class="bi bi-briefcase"></i> Job-Specific Evaluation
        </div>
        
        <div class="info-row">
            <span class="info-label">Job Title:</span>
            <span class="info-value">{{ job_title }}</span>
        </div>
        
        <div class="info-row">
            <span class="info-label">Company:</span>
            <span class="info-value">{{ job_company }}</span>
        </div>
        
        <div class="info-row">
            <span class="info-label">Job Fit Score:</span>
            <span class="info-value">{{ job_fit_score }} / 100</span>
        </div>
        
        <!-- FEATURE 2: ELIGIBILITY BADGE -->
        <div class="info-row">
            <span class="info-label">Eligibility Status:</span>
            <span class="info-value">
                {% if job_fit_score >= 70 %}
                    <span class="badge bg-success">Eligible</span>
                {% elif job_fit_score >= 40 %}
                    <span class="badge bg-warning text-dark">Partially Eligible</span>
                {% else %}
                    <span class="badge bg-danger">Not Eligible</span>
                {% endif %}
            </span>
        </div>
    </div>
    {% endif %}
    
    <!-- FEATURE 1: FINAL SUMMARY / VERDICT BOX -->
    <div class="report-section" style="background-color: #f0f8ff; border: 2px solid #007bff;">
        <div class="section-title">
            <i class="bi bi-clipboard-check"></i> Final Summary / Verdict
        </div>
        
        <div class="text-center">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <strong>Resume Status:</strong><br>
                    <span class="
                        {% if readiness_status == 'Ready' %}text-success
                        {% elif readiness_status == 'Partially Ready' %}text-warning
                        {% else %}text-danger{% endif %}" style="font-size: 1.2rem; font-weight: bold;">
                        {{ readiness_status }}
                    </span>
                </div>
                <div class="col-md-6 mb-3">
                    <strong>Resume Score:</strong><br>
                    <span style="font-size: 1.2rem; font-weight: bold; color: #007bff;">
                        {{ resume_score }} / 100
                    </span>
                </div>
            </div>
            
            {% if job_title != "Not Selected" %}
            <div class="row">
                <div class="col-md-6 mb-3">
                    <strong>Job Fit Score:</strong><br>
                    <span style="font-size: 1.2rem; font-weight: bold; color: #007bff;">
                        {{ job_fit_score }} / 100
                    </span>
                </div>
                <div class="col-md-6 mb-3">
                    <strong>Missing Skills:</strong><br>
                    {% if missing_skills and missing_skills|length > 0 %}
                        <span style="font-size: 1.2rem; font-weight: bold; color: #dc3545;">
                            {{ missing_skills|length }} skill(s)
                        </span>
                    {% else %}
                        <span style="font-size: 1.2rem; font-weight: bold; color: #28a745;">
                            No missing skills
                        </span>
                    {% endif %}
                </div>
            </div>
            {% else %}
            <div class="row">
                <div class="col-12 mb-3">
                    <strong>Missing Skills:</strong><br>
                    {% if missing_skills and missing_skills|length > 0 %}
                        <span style="font-size: 1.2rem; font-weight: bold; color: #dc3545;">
                            {{ missing_skills|length }} skill(s)
                        </span>
                    {% else %}
                        <span style="font-size: 1.2rem; font-weight: bold; color: #28a745;">
                            No missing skills
                        </span>
                    {% endif %}
                </div>
            </div>
            {% endif %}
            
            <!-- FEATURE 5: CONFIDENCE LEVEL (TEXT ONLY) -->
            <div class="mt-3 p-3" style="background-color: white; border-radius: 8px; border: 1px solid #dee2e6;">
                <strong>Confidence Level:</strong><br>
                {% if readiness_status == "Ready" and job_fit_score >= 70 %}
                    <span style="font-size: 1.5rem; font-weight: bold; color: #28a745;">
                        <i class="bi bi-emoji-smile"></i> High
                    </span>
                {% elif readiness_status == "Partially Ready" %}
                    <span style="font-size: 1.5rem; font-weight: bold; color: #ffc107;">
                        <i class="bi bi-emoji-neutral"></i> Medium
                    </span>
                {% else %}
                    <span style="font-size: 1.5rem; font-weight: bold; color: #dc3545;">
                        <i class="bi bi-emoji-frown"></i> Low
                    </span>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- FEATURE 3: SKILL IMPROVEMENT TIPS (STATIC) -->
    {% if missing_skills and missing_skills|length > 0 %}
    <div class="report-section" style="background-color: #fff3cd; border: 2px solid #ffc107;">
        <div class="section-title" style="color: #856404;">
            <i class="bi bi-lightbulb"></i> Improvement Tips
        </div>
        
        <p><strong>To improve your skills and increase your job readiness, consider the following:</strong></p>
        
        <ul class="skills-list">
            <li>Practice core technical skills through online coding platforms</li>
            <li>Build small projects to demonstrate your abilities</li>
            <li>Revise fundamentals and strengthen your knowledge base</li>
            <li>Improve problem-solving skills with regular practice</li>
            <li>Take online courses or tutorials for missing skills</li>
            <li>Participate in hackathons and coding competitions</li>
            <li>Contribute to open-source projects on GitHub</li>
            <li>Network with professionals in your field</li>
        </ul>
        
        <p class="text-muted small mt-3" style="font-style: italic;">
            <i class="bi bi-info-circle"></i> These are general tips to help you improve. Focus on the missing skills listed above.
        </p>
    </div>
    {% endif %}
    
    <!-- Visual Analytics Section -->
    <div class="report-section">
        <div class="section-title">
            <i class="bi bi-bar-chart"></i> Visual Analytics
        </div>
        
        <p class="text-muted small" style="font-style: italic;">
            These charts are generated based on your resume evaluation and job analysis.
        </p>
        
        <!-- Bar Chart -->
        <div class="text-center mb-4">
            <h6>Job Availability Across Fields</h6>
            <img src="{{ url_for('static', filename='images/job_field_chart.png') }}" 
                 alt="Job Field Bar Chart" 
                 class="chart-image">
        </div>
        
        <!-- Pie Chart -->
        {% if missing_skills and missing_skills|length > 0 %}
        <div class="text-center mb-4">
            <h6>Skill Gap Impact Distribution</h6>
            <img src="{{ url_for('static', filename='images/skill_gap_chart.png') }}" 
                 alt="Skill Gap Pie Chart" 
                 class="chart-image">
        </div>
        
        <!-- Line Chart -->
        <div class="text-center mb-4">
            <h6>Current Skill Readiness Progress</h6>
            <img src="{{ url_for('static', filename='images/skill_readiness_chart.png') }}" 
                 alt="Skill Readiness Line Chart" 
                 class="chart-image">
        </div>
        {% endif %}
    </div>
    
    <!-- Footer -->
    <div class="text-center mt-4 text-muted">
        <p><small>Generated by NextHire.AI - Resume Evaluation System</small></p>
    </div>
    
    <!-- Print Instructions (hidden when printing) -->
    <div class="no-print">
        <div class="alert alert-info">
            <i class="bi bi-info-circle"></i>
            <strong>To download this report:</strong> Use your browser's Print function (Ctrl+P / Cmd+P) and select "Save as PDF"
        </div>
        
        <button onclick="window.print()" class="btn btn-primary btn-lg">
            <i class="bi bi-printer"></i> Print / Save as PDF
        </button>
        
        <button onclick="window.close()" class="btn btn-secondary btn-lg ms-2">
            <i class="bi bi-x-circle"></i> Close
        </button>
        
        <!-- FEATURE 4: RESET / START NEW EVALUATION BUTTON -->
        <button onclick="window.location.href='/reset-evaluation'" class="btn btn-success btn-lg ms-2">
            <i class="bi bi-arrow-clockwise"></i> Start New Evaluation
        </button>
    </div>
</div>

</body>
</html>
